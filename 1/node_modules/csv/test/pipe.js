// Generated by CoffeeScript 1.4.0

/*
Test CSV - Copyright David Worms <open@adaltas.com> (BSD Licensed)
*/


(function() {
  var csv, fs, generator, should;

  require('coffee-script');

  fs = require('fs');

  should = require('should');

  csv = process.env.CSV_COV ? require('../lib-cov/csv') : require('../src/csv');

  generator = process.env.CSV_COV ? require('../lib-cov/generator') : require('../src/generator');

  describe('pipe', function() {
    return it('should pipe to a file writable stream', function(next) {
      var path, w;
      path = "/tmp/large.out";
      w = generator({
        start: true,
        duration: 1000
      }).pipe(csv().to.path(path));
      return w.on('close', function() {
        return fs.unlink(path, next);
      });
    });
  });

}).call(this);
